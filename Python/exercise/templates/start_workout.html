{% extends "base.html" %}
{% block content %}
<div style="max-width:800px;margin:0 auto">
    <div class="card">
        <h3 class="card-header">{{ program_workout.name }}</h3>
        <form method="POST" action="{{ url_for('complete_workout', program_workout_id=program_workout.id) }}">
            {% for ex in program_workout.exercises.order_by('order') %}
            <div class="exercise-list-item" style="margin-bottom:20px">
                <div style="margin-bottom:15px">
                    <strong style="font-size:1.1em;color:#d1312c">{{ ex.exercise.name }}</strong>
                    <div style="color:#999;font-size:.9em;margin-top:5px">Target: {{ ex.sets }} sets Ã— {{ ex.reps }} reps</div>
                    {% if ex.notes %}
                    <div style="color:#aaa;font-size:.85em;margin-top:5px">{{ ex.notes }}</div>
                    {% endif %}
                    {% if ex.exercise.video_url %}
                    <a href="{{ ex.exercise.video_url }}" target="_blank" class="video-link" style="margin-top:5px;display:inline-block">ðŸ“¹ Watch Video</a>
                    {% endif %}
                </div>
                <input type="hidden" name="exercise_id_{{ loop.index }}" value="{{ ex.exercise.id }}">
                <input type="hidden" name="sets_{{ loop.index }}" value="{{ ex.sets }}">
                <div style="margin-bottom:15px">
                    <strong style="color:#d1312c">{{ ex.sets }} Sets:</strong>
                    {% for set_num in range(1, ex.sets + 1) %}
                    <div style="display:grid;grid-template-columns:auto 1fr 1fr;gap:10px;align-items:center;margin-bottom:10px;padding:10px;background:#0a0a0a;border-radius:4px">
                        <span style="color:#999;font-weight:600">Set {{ set_num }}:</span>
                        <div class="form-group" style="margin:0">
                            <label style="margin-bottom:5px;font-size:.8em">Reps</label>
                            <input type="number" name="reps_{{ loop.index }}_{{ set_num }}" value="{{ ex.reps }}" min="1" required>
                        </div>
                        <div class="form-group" style="margin:0">
                            <label style="margin-bottom:5px;font-size:.8em">Weight (kg)</label>
                            <input type="number" name="weight_{{ loop.index }}_{{ set_num }}" step="0.5" min="0" required>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="form-group">
                    <label>Notes (optional)</label>
                    <textarea name="notes_{{ loop.index }}" rows="2" placeholder="How did it feel?"></textarea>
                </div>
            </div>
            {% endfor %}
            <input type="hidden" name="exercise_count" value="{{ program_workout.exercises.count() }}">
            <button type="submit" class="btn btn-block btn-success">Complete Workout</button>
        </form>
    </div>
</div>
{% endblock %}