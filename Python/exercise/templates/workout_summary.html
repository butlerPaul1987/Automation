{% extends "base.html" %}
{% block content %}
<div style="max-width:600px;margin:0 auto">
    <div class="card">
        <h3 class="card-header">üéâ Workout Complete!</h3>
        
        {% if pr_count > 0 %}
        <div style="background:#1a4d1a;border:1px solid #2d7d2d;border-radius:4px;padding:15px;margin-bottom:20px;text-align:center">
            <h4 style="color:#4ade80;margin:0">{{ pr_count }} Personal Record{{ 's' if pr_count != 1 else '' }}! üèÜ</h4>
        </div>
        {% endif %}
        
        <div style="margin-bottom:20px">
            <h4 style="color:#d1312c;margin-bottom:15px">Workout Summary</h4>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:15px;font-size:.9em;color:#999;font-weight:600">
                <div>Exercise</div>
                <div style="text-align:center">Sets</div>
                <div style="text-align:center">Max Weight</div>
            </div>
            
            {% for item in summary %}
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;align-items:center;padding:10px;background:#0a0a0a;border-radius:4px;margin-bottom:8px">
                <div>
                    <strong>{{ item.exercise }}</strong>
                    {% if item.has_improvement %}
                    <span style="color:#4ade80;font-size:.8em">üìà</span>
                    {% endif %}
                </div>
                <div style="text-align:center">
                    {{ item.sets }}
                    {% if item.sets_change != 0 %}
                    <span style="color:{{ '#4ade80' if item.sets_change > 0 else '#ef4444' }};font-size:.8em">
                        ({{ '+' if item.sets_change > 0 else '' }}{{ item.sets_change }})
                    </span>
                    {% endif %}
                </div>
                <div style="text-align:center">
                    {{ item.max_weight }}kg
                    {% if item.weight_change != 0 %}
                    <span style="color:{{ '#4ade80' if item.weight_change > 0 else '#ef4444' }};font-size:.8em">
                        ({{ '+' if item.weight_change > 0 else '' }}{{ item.weight_change }}kg)
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if summary|selectattr('volume_change', 'ne', 0)|list %}
        <div style="margin-bottom:20px">
            <h5 style="color:#d1312c;margin-bottom:10px">Volume Changes vs Last Week</h5>
            {% for item in summary %}
            {% if item.volume_change != 0 %}
            <div style="display:flex;justify-content:space-between;padding:8px;background:#0a0a0a;border-radius:4px;margin-bottom:5px">
                <span>{{ item.exercise }}</span>
                <span style="color:{{ '#4ade80' if item.volume_change > 0 else '#ef4444' }}">
                    {{ '+' if item.volume_change > 0 else '' }}{{ item.volume_change }}kg total
                </span>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        
        <div style="text-align:center;margin-top:20px">
            <a href="{{ url_for('client_dashboard') }}" class="btn btn-primary">Back to Dashboard</a>
        </div>
    </div>
</div>
{% endblock %}